# prefect.yaml
name: carulla
prefect-version: 3.0.0

# Definición de los flujos
flows:
  - name: flujo_diario
    entrypoint: descarga_diaria.py:flujo_diario

# Configuración de despliegue
deployments:
  - name: descarga_diaria_6am
    flow_name: flujo_diario
    schedule:
      cron: "0 6 * * *"
    parameters: {}
    work_pool:
      name: descarga-managed
      work_queue_name: default
      job_variables:
        env:
          PREFECT_LOGGING_LEVEL: INFO
        image: prefecthq/prefect:3-python3.12
        command:
          - /bin/bash
          - -c
          - |
            pip install --no-cache-dir prefect==3.0.0 requests pandas
            python -m prefect.engine


