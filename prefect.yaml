name: carulla
prefect-version: 3.0.0

flows:
  # Define la ubicación del flujo
  - name: flujo_diario
    entrypoint: descarga_diaria.py:flujo_diario # Asegúrate que el archivo y la función sean correctos

deployments:
  - name: descarga_diaria_6am
    # 📌 Configuración de programación (ejemplo: cada día a las 6 AM)
    schedule: 
      interval: 86400 # 24 horas en segundos
      anchor: "06:00" # Hora de inicio (6:00 AM)
    
    # 📌 Configuración del Work Pool
    work_pool:
      name: descarga-managed # Work Pool Administrado
      work_queue_name: default
      
      # 📌 Variables de Trabajo (Job Variables)
      job_variables:
        # ➡️ IMAGEN DE DOCKER: Usada por el Work Pool Managed para ejecutar el código.
        image: raultorres09/carulla-flujo-diario:latest 
        
        env:
          # Variables de entorno para el contenedor
          PREFECT_LOGGING_LEVEL: INFO
          PYTHONIOENCODING: utf-8
        
        # ⚠️ Nota: El 'command' de diagnóstico ha sido eliminado, 
        # ya que las dependencias están en la imagen.



