# prefect.yaml (VersiÃ³n de DiagnÃ³stico y EjecuciÃ³n Final)
name: carulla
prefect-version: 3.0.0

flows:
  - name: flujo_diario
    entrypoint: descarga_diaria.py:flujo_diario

deployments:
  - name: descarga_diaria_6am
    # ... (omitido por espacio)
    work_pool:
      name: descarga-managed
      work_queue_name: default
      job_variables:
        image: prefecthq/prefect:3-python3.12
        env:
          PREFECT_LOGGING_LEVEL: INFO
          PYTHONIOENCODING: utf-8
        # ðŸš¨ COMANDO DE DIAGNÃ“STICO E INSTALACIÃ“N ðŸš¨
        command:
          - /bin/bash
          - -c
          - |
            echo "ðŸ”§ Paso 1: Iniciando InstalaciÃ³n..."
            /usr/local/bin/python -m pip install requests pandas openpyxl && \
            
            echo "ðŸ”Ž Paso 2: Verificando InstalaciÃ³n..."
            /usr/local/bin/python -c "import pandas; import requests; print('âœ… VERIFICACIÃ“N OK: Pandas y Requests importados con Ã©xito.')" && \
            
            echo "ðŸš€ Paso 3: Ejecutando Flujo..."
            python -m prefect.engine
            
            echo "âœ… Flujo Finalizado."

