name: carulla
prefect-version: 3.0.0

flows:
  # Define la ubicaci贸n del flujo
  - name: flujo_diario
    entrypoint: descarga_diaria.py:flujo_diario # Aseg煤rate que el archivo y la funci贸n sean correctos

deployments:
  - name: descarga_diaria_6am
    #  Configuraci贸n de programaci贸n (ejemplo: cada d铆a a las 6 AM)
    schedule: 
      interval: 86400 # 24 horas en segundos
      anchor: "06:00" # Hora de inicio (6:00 AM)
    
    #  Configuraci贸n del Work Pool
    work_pool:
      name: descarga-managed # Work Pool Administrado
      work_queue_name: default
      
      #  Variables de Trabajo (Job Variables)
      job_variables:
        # ★ IMAGEN DE DOCKER: Usada por el Work Pool Managed para ejecutar el c贸digo.
        image: raultorres09/carulla-flujo-diario:latest 
        
        env:
          # Variables de entorno para el contenedor
          PREFECT_LOGGING_LEVEL: INFO
          PYTHONIOENCODING: utf-8
        
        # 锔 Nota: El 'command' de diagn贸stico ha sido eliminado, 
        # ya que las dependencias est谩n en la imagen.



